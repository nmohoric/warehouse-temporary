{"templates": {"bucket_list": {"body": "| Name | Creation Date |\n| ---- | ------------- |\n~each var=$results as=bucket~\n| ~$bucket.name~ | ~$bucket.creation_date~ |\n~end~\n"}, "bucket_acl": {"body": "| Permission | Grantee |\n| ---- | ------------- |\n~each var=$results as=acl~\n| ~$acl.permission~ | ~$acl.grantee.display_name~ |\n~end~\n"}, "file_info": {"body": "~each var=$results as=file~\nContents of file ~$file.key~ in bucket ~$file.bucket~\n```\n~$file.body~\n```\n~end~\n"}, "file_create": {"body": "~each var=$results as=file~\nCreated file ~$file.key~ in bucket ~$file.bucket~\n~end~\n"}, "bucket_destroy": {"body": "~each var=$results as=bucket~\nDestroyed bucket ~$bucket.name~\n~end~\n"}, "file_list": {"body": "| Key | Last Modified | Size |\n| --- | ------------- | ---- |\n~each var=$results as=file~\n| ~$file.key~ | ~$file.last_modified~ | ~$file.size~ |\n~end~\n"}, "bucket_create": {"body": "~each var=$results as=bucket~\nCreated bucket at location ~$bucket.location~\n~end~\n"}, "file_destroy": {"body": "~each var=$results as=file~\nDestroyed file ~$file.key~ in bucket ~$file.bucket~\n~end~\n"}}, "commands": {"file-create": {"rules": ["must have s3:write"], "arguments": "<bucket> <key> <body>", "executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Creates a file"}, "bucket-destroy": {"rules": ["must have s3:admin"], "arguments": "<name> [<name> ...]", "executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Destroys buckets"}, "file-list": {"executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Lists files in a bucket", "rules": ["must have s3:read"], "long_description": "If you have a large number of files or want to filter down to only a few in a pipeline, you can use the optional pattern argument. The pattern can be any valid ruby regular expression and is applied to the file key. Only files with matching keys will be returned. If a pattern is not provided all files in the bucket are returned.\n", "arguments": "<bucket> [pattern]"}, "bucket-acl": {"rules": ["must have s3:read"], "arguments": "<bucket>", "executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Lists ACLs of a bucket"}, "bucket-list": {"executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Lists buckets", "rules": ["must have s3:read"], "long_description": "If you have a large number of buckets or want to filter down to only a few in a pipeline, you can use the optional pattern argument. The pattern can be any valid ruby regular expression and is applied to the bucket name. Only buckets with matching names will be returned. If a pattern is not provided all buckets are returned.\n", "arguments": "[pattern]"}, "bucket-create": {"rules": ["must have s3:write"], "arguments": "<name>", "executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location in which to create the bucket (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}, "acl": {"short_flag": "a", "required": false, "type": "string", "description": "ACL to apply. Defaults to private. (private, public-read, public-read-write, authenticated-read)"}}, "description": "Creates a bucket"}, "file-destroy": {"rules": ["must have s3:admin"], "arguments": "<bucket> <key>", "executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Destroys a file"}, "file-info": {"rules": ["must have s3:read"], "arguments": "<bucket> <key>", "executable": "/home/bundle/cog-command", "options": {"region": {"short_flag": "r", "required": false, "type": "string", "description": "S3 location to connect to (us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-central-1, ap-southeast-1, ap-southeast-2, ap-northeast-1, ap-northeast-2, ap-south-1, sa-east-1)"}}, "description": "Reads a file"}}, "description": "Manage S3 buckets and files", "author": "Patrick Van Stee <patrick@operable.io>", "homepage": "https://github.com/cogcmd/aws-s3", "name": "s3", "version": "0.1.0", "docker": {"image": "cogcmd/aws-s3", "tag": "0.1.0"}, "cog_bundle_version": 4, "config": {"notes": "When creating the access key for use with the following environment variables, make sure the IAM user that owns the key has the AmazonS3FullAccess policy.\n", "env": [{"var": "AWS_ACCESS_KEY_ID", "description": "Requried ID of the access key used to authenticate with the AWS API"}, {"var": "AWS_SECRET_ACCESS_KEY", "description": "Required secret of the access key used to authenticate with the AWS API"}, {"var": "AWS_REGION", "description": "Optional region used for all commands unless one is provided via the -r,--region flag"}]}, "long_description": "This bundle provides commands for creating, inspecting, and controlling S3 buckets and objects (referred to as files in this bundle) on AWS. To communicate with the AWS API we use the aws-sdk library written in Ruby. Permissions are used to control which users are authorized to run each command. Listing and reading buckets and files requires the s3:read permission. Modifying the state or other values of buckets and files requires the s3:write permission. And, deleting buckets and files requires the s3:admin permission.\n", "permissions": ["s3:read", "s3:write", "s3:admin"]}